<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Neon Snake</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="download-removebg-preview.png" type="image/x-icon">
<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial;
  display:flex;
  flex-direction:column;
  align-items:center;
}
h2{margin:8px}

canvas{
  background:#000;
  border:3px solid #333;
}

#panel{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
  margin-bottom:6px;
}

button{
  padding:6px 12px;
  background:#111;
  color:white;
  border:1px solid #444;
  border-radius:6px;
  cursor:pointer;
}

#info{
  display:flex;
  gap:20px;
  margin-bottom:6px;
  font-weight:bold;
}

.controls{
  margin-top:10px;
  display:grid;
  grid-template-columns:repeat(3,70px);
  gap:8px;
}
</style>
</head>

<body>

<h2>Neon Snake üåà</h2>

<div id="info">
  <div>Score: <span id="score">0</span></div>
  <div>Level: <span id="level">1</span></div>
  <div>High: <span id="high">0</span></div>
</div>

<div id="panel">
  <button id="startBtn">‚ñ∂ Start</button>
  <button id="pauseBtn">‚è∏ Pause</button>
  <button id="restartBtn">üîÑ Restart</button>
</div>

<canvas id="cv" width="520" height="520"></canvas>

<!-- Mobile Controls -->
<div class="controls">
  <div></div><button onclick="setDir('UP')">‚¨Ü</button><div></div>
  <button onclick="setDir('LEFT')">‚¨Ö</button>
  <button onclick="setDir('DOWN')">‚¨á</button>
  <button onclick="setDir('RIGHT')">‚û°</button>
</div>

<script>
/* ============ CONFIG ============ */
const canvas=cv, ctx=canvas.getContext("2d");
const SIZE=20;
let baseSpeed=7;
let interval=null;
let running=false;

/* ============ STORAGE ============ */
let highScore = localStorage.getItem("neonSnakeHigh") || 0;
high.textContent = highScore;

/* ============ GAME STATE ============ */
let snake, dir, next, food;
let scoreVal=0, levelVal=1;

/* ============ INIT ============ */
reset();

/* ============ INPUT ============ */
document.addEventListener("keydown",e=>{
  if(!running) return;
  const k=e.key.toLowerCase();
  if((k==="w"||k==="arrowup")&&dir!=="DOWN")next="UP";
  if((k==="s"||k==="arrowdown")&&dir!=="UP")next="DOWN";
  if((k==="a"||k==="arrowleft")&&dir!=="RIGHT")next="LEFT";
  if((k==="d"||k==="arrowright")&&dir!=="LEFT")next="RIGHT";
});

function setDir(d){
  if(!running) return;
  const o={UP:"DOWN",DOWN:"UP",LEFT:"RIGHT",RIGHT:"LEFT"};
  if(o[dir]!==d) next=d;
}

/* ============ LOOP ============ */
function loop(){
  dir=next;
  let head={...snake[0]};
  if(dir==="UP")head.y-=SIZE;
  if(dir==="DOWN")head.y+=SIZE;
  if(dir==="LEFT")head.x-=SIZE;
  if(dir==="RIGHT")head.x+=SIZE;
  snake.unshift(head);

  if(head.x===food.x && head.y===food.y){
    scoreVal++;
    updateLevel();
    food=randomPos();
  }else snake.pop();

  if(hitWall(head)||hitSelf(head)) gameOver();
  draw();
}

/* ============ DRAW ============ */
function draw(){
  ctx.clearRect(0,0,520,520);

  ctx.fillStyle="red";
  ctx.beginPath();
  ctx.arc(food.x+10,food.y+10,8,0,Math.PI*2);
  ctx.fill();

  snake.forEach((p,i)=>{
    ctx.fillStyle=`hsl(${i*25+Date.now()/10},100%,50%)`;
    ctx.beginPath();
    ctx.arc(p.x+10,p.y+10,9,0,Math.PI*2);
    ctx.fill();
  });
}

/* ============ LEVEL SYSTEM ============ */
function updateLevel(){
  score.textContent=scoreVal;
  let newLevel=Math.floor(scoreVal/5)+1;
  if(newLevel!==levelVal){
    levelVal=newLevel;
    level.textContent=levelVal;
    restartLoop();
  }
}

/* ============ BUTTONS ============ */
startBtn.onclick=()=>{
  if(!running){
    running=true;
    restartLoop();
  }
};

pauseBtn.onclick=()=>{
  running=false;
  clearInterval(interval);
};

restartBtn.onclick=()=>{
  clearInterval(interval);
  running=false;
  reset();
};

/* ============ GAME OVER ============ */
function gameOver(){
  pauseBtn.onclick();

  if(scoreVal > highScore){
    highScore = scoreVal;
    localStorage.setItem("neonSnakeHigh", highScore);
    high.textContent = highScore;
    alert("üéâ New High Score: " + highScore);
  }else{
    alert("Game Over!\nScore: " + scoreVal);
  }
}

/* ============ HELPERS ============ */
function reset(){
  snake=[{x:100,y:100}];
  dir=next="RIGHT";
  food=randomPos();
  scoreVal=0;
  levelVal=1;
  score.textContent=0;
  level.textContent=1;
  draw();
}

function restartLoop(){
  clearInterval(interval);
  interval=setInterval(loop,1000/(baseSpeed+levelVal));
}

function hitWall(h){
  return h.x<0||h.y<0||h.x>=520||h.y>=520;
}
function hitSelf(h){
  return snake.slice(1).some(p=>p.x===h.x&&p.y===h.y);
}
function randomPos(){
  return{
    x:Math.floor(Math.random()*26)*20,
    y:Math.floor(Math.random()*26)*20
  };
}
</script>

</body>
</html>
